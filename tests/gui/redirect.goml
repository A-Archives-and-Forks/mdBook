go-to: |DOC_PATH| + "test_book/format/config.html"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html"})

// Check that it preserves fragments when redirecting.
go-to: |DOC_PATH| + "test_book/format/config.html#fragment"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html#fragment"})

// The fragment one here isn't necessary, but should still work.
go-to: |DOC_PATH| + "test_book/pointless-fragment.html"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html"})
go-to: |DOC_PATH| + "test_book/pointless-fragment.html#foo"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html#foo"})

// Page rename, and a fragment rename.
go-to: |DOC_PATH| + "test_book/rename-page-and-fragment.html"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html"})
go-to: |DOC_PATH| + "test_book/rename-page-and-fragment.html#orig"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html#new"})

// Page rename, and the fragment goes to a *different* page from the default.
go-to: |DOC_PATH| + "test_book/rename-page-fragment-elsewhere.html"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html"})
go-to: |DOC_PATH| + "test_book/rename-page-fragment-elsewhere.html#orig"
assert-window-property: ({"location": |DOC_PATH| + "test_book/suffix.html#new"})

// Rename fragment on an existing page.
go-to: |DOC_PATH| + "test_book/prefix.html#orig"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html#new"})

// Other fragments aren't affected.
go-to: |DOC_PATH| + "test_book/index.html" // Reset page since redirects are processed on load.
go-to: |DOC_PATH| + "test_book/prefix.html"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html"})
go-to: |DOC_PATH| + "test_book/index.html" // Reset page since redirects are processed on load.
go-to: |DOC_PATH| + "test_book/prefix.html#dont-change"
assert-window-property: ({"location": |DOC_PATH| + "test_book/prefix.html#dont-change"})

// Rename fragment on an existing page to another page.
go-to: |DOC_PATH| + "test_book/index.html" // Reset page since redirects are processed on load.
go-to: |DOC_PATH| + "test_book/prefix.html#orig-new-page"
assert-window-property: ({"location": |DOC_PATH| + "test_book/suffix.html#new"})
